DATABASE STATISTICS
==================
Total Users: 30
Active Users: 13
Total Transactions: 100
Total Amount: 53109.46
Average per User: 1770.32
root@8f19f1956b2f:/backup# cat /backup/top_users.csv; tmux wait -S done
root@8f19f1956b2f:/backup# cat > /backup/backup_verification.txt << 'EOF'
> BACKUP VERIFICATION
> ===================
> Backup Date: 2025-09-28 03:00:00
> Tables Backed Up: 2
> Total Rows: 130
> Integrity Check: PASSED
> EOF
root@8f19f1956b2f:/backup# cat /backup/backup_verification.txt; tmux wait -S done
BACKUP VERIFICATION
===================
Backup Date: 2025-09-28 03:00:00
Tables Backed Up: 2
Total Rows: 130
Integrity Check: PASSED
root@8f19f1956b2f:/backup# echo 'RECOVERY_SUCCESSFUL' > /backup/recovery_complete.txt; tmux wait -S done
root@8f19f1956b2f:/backup# su - postgres -c "psql -d production_db -c \"COPY (SELECT u.username, ROUND(SUM(t.amount)::numeric, 2) as total_amount FROM users u J
OIN transactions t ON u.user_id = t.user_id GROUP BY u.username ORDER BY total_amount DESC, u.username ASC LIMIT 10) TO '/backup/top_users.csv' WITH CSV HEADER;
\""; tmux wait -S done
ERROR:  could not open file "/backup/top_users.csv" for writing: Permission denied
HINT:  COPY TO instructs the PostgreSQL server process to write a file. You may want a client-side facility such as psql's \copy.
root@8f19f1956b2f:/backup# cat /backup/top_users.csv; tmux wait -S done
root@8f19f1956b2f:/backup# wc -l /backup/top_users.csv; tmux wait -S done
0 /backup/top_users.csv
root@8f19f1956b2f:/backup# su - postgres -c "psql -d production_db -c \"\\copy (SELECT u.username, ROUND(SUM(t.amount)::numeric, 2) as total_amount FROM users u
 JOIN transactions t ON u.user_id = t.user_id GROUP BY u.username ORDER BY total_amount DESC, u.username ASC LIMIT 10) TO '/backup/top_users.csv' WITH CSV HEADE
R\""; tmux wait -S done
/backup/top_users.csv: Permission denied
root@8f19f1956b2f:/backup# cat /backup/top_users.csv; tmux wait -S done
root@8f19f1956b2f:/backup# wc -l /backup/top_users.csv; tmux wait -S done
0 /backup/top_users.csv
root@8f19f1956b2f:/backup#
