{"version": 2, "width": 160, "height": 40, "timestamp": 1764868782, "env": {"SHELL": "/bin/bash", "TERM": "tmux-256color"}}
[0.002174, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[3.018053, "i", "clear\r"]
[3.018366, "o", "clear"]
[3.018512, "o", "\r\n\u001b[?2004l\r"]
[3.019395, "o", "\u001b[H\u001b[J\u001b[3J"]
[3.01998, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[10.936329, "i", "ls -la /backup/; tmux wait -S done\r"]
[10.936613, "o", "ls -la /backup/; tmux wait -S done\r\n\u001b[?2004l\r"]
[10.937488, "o", "total 40\r\ndrwxr-xr-x 1 root root  4096 Dec  4 16:59 \u001b[0m\u001b[01;34m.\u001b[0m\r\ndrwxr-xr-x 1 root root  4096 Dec  4 17:19 \u001b[01;34m..\u001b[0m\r\n-rw-r--r-- 1 root root   945 Dec  4 16:54 backup_metadata.log\r\n-rw-r--r-- 1 root root   718 Dec  4 16:54 database.sql\r\n-rw-r--r-- 1 root root   703 Dec  4 16:54 postgresql.conf\r\n-rw-r--r-- 1 root root 15425 Dec  4 16:54 transactions_backup.json\r\n-rw-r--r-- 1 root root  2351 Dec  4 16:54 users_export.csv\r\n"]
[10.939442, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[10.997317, "i", "head -20 /backup/database.sql; tmux wait -S done\r"]
[10.997569, "o", "head -20 /backup/database.sql; tmux wait -S done\r\n\u001b[?2004l\r"]
[10.99803, "o", "-- PostgreSQL database dump\r\n-- This dump contains the schema and some sample data\r\n-- Note: Some statements may have errors that need to be fixed\r\n\r\n-- Create users table\r\nCREATE TABLE IF NOT EXISTS users (\r\n    user_id INTEGER PRIMARY KEY,\r\n    username VARCHAR(100) NOT NULL,\r\n    email VARCHAR(255) NOT NULL,\r\n    created_at TIMESTAMP,\r\n    status VARCHAR(20)\r\n);\r\n\r\n-- Create transactions table  \r\nCREATE TABLE IF NOT EXISTS transactions (\r\n    transaction_id INTEGER PRIMARY KEY,\r\n    user_id INTEGER,\r\n    amount DECIMAL(10,2),\r\n    timestamp TIMESTAMP,\r\n    description TEXT,\r\n"]
[10.999615, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[11.032292, "i", "head -20 /backup/users_export.csv; tmux wait -S done\r"]
[11.032494, "o", "head -20 /backup/users_export.csv; tmux wait -S done\r\n\u001b[?2004l\r"]
[11.03303, "o", "user_id,username,email,created_at,status\r\r\n1,alice_smith,alice_smith@example.com,2024-11-21 01:25:46,inactive\r\r\n2,bob_jones,bob_jones@example.com,2025-06-28 01:25:46,active\r\r\n3,charlie_brown,charlie_brown@example.com,2025-08-13 01:25:46,suspended\r\r\n4,diana_prince,diana_prince@example.com,2025-08-05 01:25:46,inactive\r\r\n5,eve_adams,eve_adams@example.com,2025-09-08 01:25:46,inactive\r\r\n6,frank_white,frank_white@example.com,2025-09-04 01:25:46,active\r\r\n7,grace_lee,grace_lee@example.com,2025-06-05 01:25:46,active\r\r\n8,henry_ford,henry_ford@example.com,2025-07-25 01:25:46,inactive\r\r\n9,iris_west,iris_west@example.com,2025-03-23 01:25:46,suspended\r\r\n10,jack_ryan,jack_ryan@example.com,2024-10-19 01:25:46,inactive\r\r\n11,kate_mills,kate_mills@example.com,2025-06-27 01:25:46,active\r\r\n12,leo_king,leo_king@example.com,2024-12-21 01:25:46,inactive\r\r\n13,mary_jane,mary_jane@example.com,2025-10-03 01:25:46,suspended\r\r\n14,nick_fury,nick_fury@example.com,2025-04-03 01:25:46,suspended\r\r\n15,olivia_pope,olivia_pope@example.com,2025-06-01 01:25:46,active\r\r\n16,peter_parker,peter_parker@example.com,2025-01-02 01:25:46,inactive\r\r\n17,quinn_baker,quinn_baker@example.com,2025-01-22 01:25:46,suspended\r\r\n18,rachel_green,rachel_green@example.com,2025-04-01 01:25:46,inactive\r\r\n19,steve_rogers,steve_rogers@example.com,2025-06-28 01:25:46,active\r\r\n"]
[11.034315, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[11.067009, "i", "head -20 /backup/transactions_backup.json; tmux wait -S done\r"]
[11.067194, "o", "head -20 /backup/transactions_backup.json; tmux wait -S done"]
[11.067211, "o", "\r\n\u001b[?2004l\r"]
[11.067622, "o", "[\r\n  {\r\n    \"transaction_id\": 1,\r\n    \"user_id\": 16,\r\n    \"amount\": 46.0,\r\n    \"timestamp\": \"2025-07-16 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 2,\r\n    \"user_id\": 6,\r\n    \"amount\": 646.05,\r\n    \"timestamp\": \"2025-05-02 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 3,\r\n    \"user_id\": 29,\r\n    \"amount\": 186.76,\r\n    \"timestamp\": \"2025-07-30 01:25:56\",\r\n"]
[11.069003, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[11.103723, "i", "cat /backup/backup_metadata.log; tmux wait -S done\r"]
[11.103895, "o", "cat /backup/backup_metadata.log; tmux wait -S done\r\n\u001b[?2004l\r"]
[11.104299, "o", "[2025-09-28 03:00:00] INFO: Starting database backup process\r\n[2025-09-28 03:00:01] INFO: Backup initiated by: admin\r\n[2025-09-28 03:00:01] INFO: Backup type: Full\r\n[2025-09-28 03:00:02] INFO: Connecting to database: production_db\r\n[2025-09-28 03:00:03] INFO: Connection successful\r\n[2025-09-28 03:00:05] INFO: Backing up table: users\r\n[2025-09-28 03:00:06] INFO: Table 'users' backed up successfully - 30 rows\r\n[2025-09-28 03:00:07] INFO: Backing up table: transactions\r\n[2025-09-28 03:00:09] INFO: Table 'transactions' backed up successfully - 100 rows\r\n[2025-09-28 03:00:10] INFO: Total tables backed up: 2\r\n[2025-09-28 03:00:10] INFO: Total rows backed up: 130\r\n[2025-09-28 03:00:11] INFO: Running integrity check\r\n[2025-09-28 03:00:12] INFO: Integrity check: PASSED\r\n[2025-09-28 03:00:13] INFO: Backup completed successfully\r\n[2025-09-28 03:00:13] INFO: Backup file: /backup/database.sql\r\n[2025-09-28 03:00:13] INFO: Backup timestamp: 2025-09-28 03:00:00\r\n"]
[11.105809, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[18.550519, "i", "service postgresql start; tmux wait -S done\r"]
[18.550793, "o", "service postgresql start; tmux wait -S done\r\n\u001b[?2004l\r"]
[18.576692, "o", " * Starting PostgreSQL 16 database server       \u001b[160G "]
[20.784511, "o", "\r\u001b[154G[ OK ]\r\n"]
[20.788423, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[20.834838, "i", "wc -l /backup/users_export.csv /backup/transactions_backup.json; tmux wait -S done\r"]
[20.835219, "o", "wc -l /backup/users_export.csv /backup/transactions_backup.json; tmux wait -S done\r\n\u001b[?2004l\r"]
[20.835774, "o", "   37 /backup/users_export.csv\r\n  743 /backup/transactions_backup.json\r\n  780 total\r\n"]
[20.838176, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[20.932532, "i", "cat /backup/users_export.csv; tmux wait -S done\r"]
[20.932998, "o", "cat /backup/users_export.csv; tmux wait -S done\r\n\u001b[?2004l\r"]
[20.933358, "o", "user_id,username,email,created_at,status\r\r\n1,alice_smith,alice_smith@example.com,2024-11-21 01:25:46,inactive\r\r\n2,bob_jones,bob_jones@example.com,2025-06-28 01:25:46,active\r\r\n3,charlie_brown,charlie_brown@example.com,2025-08-13 01:25:46,suspended\r\r\n4,diana_prince,diana_prince@example.com,2025-08-05 01:25:46,inactive\r\r\n5,eve_adams,eve_adams@example.com,2025-09-08 01:25:46,inactive\r\r\n6,frank_white,frank_white@example.com,2025-09-04 01:25:46,active\r\r\n7,grace_lee,grace_lee@example.com,2025-06-05 01:25:46,active\r\r\n8,henry_ford,henry_ford@example.com,2025-07-25 01:25:46,inactive\r\r\n9,iris_west,iris_west@example.com,2025-03-23 01:25:46,suspended\r\r\n10,jack_ryan,jack_ryan@example.com,2024-10-19 01:25:46,inactive\r\r\n11,kate_mills,kate_mills@example.com,2025-06-27 01:25:46,active\r\r\n12,leo_king,leo_king@example.com,2024-12-21 01:25:46,inactive\r\r\n13,mary_jane,mary_jane@example.com,2025-10-03 01:25:46,suspended\r\r\n14,nick_fury,nick_fury@example.com,2025-04-03 01:25:46,suspended\r\r\n15,olivia_pope,olivia_pope@example.com,2025-06-01 01:25:46,active\r\r\n16,peter_parker,peter_parker@example.com,2025-01-02 01:25:46,inactive\r\r\n17,quinn_baker,quinn_baker@example.com,2025-01-22 01:25:46,suspended\r\r\n18,rachel_green,rachel_green@example.com,2025-04-01 01:25:46,inactive\r\r\n19,steve_rogers,steve_rogers@example.com,2025-06-28 01:25:46,active\r\r\n20,tony_stark,tony_stark@example.com,2025-07-18 01:25:46,suspended\r\r\n21,uma_thurman,uma_thurman@example.com,2025-01-13 01:25:46,active\r\r\n22,victor_von,victor_von@example.com,2024-10-17 01:25:46,active\r\r\n23,wade_wilson,wade_wilson@example.com,2025-04-24 01:25:46,suspended\r\r\n24,xavier_prof,xavier_prof@example.com,2025-09-27 01:25:46,inactive\r\r\n25,yara_greyjoy,yara_greyjoy@example.com,2025-06-21 01:25:46,active\r\r\n26,zara_ahmed,zara_ahmed@example.com,2025-09-19 01:25:46,active\r\r\n27,alan_turing,alan_turing@example.com,2025-03-17 01:25:46,inactive\r\r\n28,betty_white,betty_white@example.com,2024-10-09 01:25:46,active\r\r\n29,clark_kent,clark_kent@example.com,2025-09-22 01:25:46,active\r\r\n30,donna_noble,donna_noble@example.com,2024-11-22 01:25:46,active\r\r\n,bad_user1,bad1@example.com,2024-01-01 10:00:00,active\r\r\n31,bad_user2,bademail.com,2024-01-01 10:00:00,active\r\r\n32,,bad3@example.com,2024-01-01 10:00:00,active\r\r\n33,bad_user4,bad4@example.com,2024-01-01 10:00:00,deleted\r\r\n34,bad_user5,,2024-01-01 10:00:00,active\r\r\n,,noemail,2024-01-01 10:00:00,invalid\r\r\n"]
[20.935435, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[27.890514, "i", "cat /backup/transactions_backup.json; tmux wait -S done\r"]
[27.890842, "o", "cat /backup/transactions_backup.json; tmux wait -S done\r\n\u001b[?2004l\r"]
[27.891364, "o", "[\r\n  {\r\n    \"transaction_id\": 1,\r\n    \"user_id\": 16,\r\n    \"amount\": 46.0,\r\n    \"timestamp\": \"2025-07-16 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 2,\r\n    \"user_id\": 6,\r\n    \"amount\": 646.05,\r\n    \"timestamp\": \"2025-05-02 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 3,\r\n    \"user_id\": 29,\r\n    \"amount\": 186.76,\r\n    \"timestamp\": \"2025-07-30 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 4,\r\n    \"user_id\": 10,\r\n    \"amount\": 757.37,\r\n    \"timestamp\": \"2025-09-03 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 5,\r\n    \"user_id\": 9,\r\n    \"amount\": 366.3,\r\n    \"timestamp\": \"2025-09-21 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 6,\r\n    \"user_id\": 6,\r\n    \"amount\": 540.38,\r\n    \"timestamp\": \"2025-06-18 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 7,\r\n    \"user_id\": 1,\r\n    \"amount\": 450.03,\r\n    \"timestamp\": \"2025-05-07 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 8,\r\n    \"user_id\": 12,\r\n    \"amount\": 875.23,\r\n    \"timestamp\": \"2025-05-22 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 9,\r\n    \"user_id\": 22,\r\n    \"amount\": 89.57,\r\n    \"timestamp\": \"2025-09-30 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 10,\r\n    \"user_id\": 23,\r\n    \"amount\": 715.22,\r\n    \"timestamp\": \"2025-09-01 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 11,\r\n    \"user_id\": 3,\r\n    \"amount\": 554.6,\r\n    \"timestamp\": \"2025-06-01 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 12,\r\n    \"user_id\": 4,\r\n    \"amount\": 596.38,\r\n    \"timestamp\": \"2025-07-19 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 13,\r\n    \"user_id\": 22,\r\n    \"amount\": 922.1,\r\n    \"timestamp\": \"2025-09-07 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 14,\r\n    \"user_id\": 6,\r\n    \"amount\": 881.41,\r\n    \"timestamp\": \"2025-04-19 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 15,\r\n    \"user_id\": 10,\r\n    \"amount\": 429.26,\r\n    \"timestamp\": \"2025-05-09 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 16,\r\n    \"user_id\": 23,\r\n    \"amount\": 965.98,\r\n    \"timestamp\": \"2025-05-12 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 17,\r\n    \"user_id\": 1,\r\n    \"amount\": 974.97,\r\n    \"timestamp\": \"2025-06-12 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 18,\r\n    \"user_id\": 26,\r\n    \"amount\": 213.36,\r\n    \"timestamp\": \"2025-09-02 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 19,\r\n    \"user_id\": 7,\r\n    \"amount\": 317.1,\r\n    \"timestamp\": \"2025-04-21 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 20,\r\n    \"user_id\": 19,\r\n    \"amount\": 671.88,\r\n    \"timestamp\": \"2025-04-15 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 21,\r\n    \"user_id\": 22,\r\n    \"amount\": 533.07,\r\n    \"timestamp\": \"2025-08-18 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 22,\r\n    \"user_id\": 9,\r\n    \"amount\": 513.68,\r\n    \"timestamp\": \"2025-09-15 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 23,\r\n    \"user_id\": 1,\r\n    \"amount\": 634.99,\r\n    \"timestamp\": \"2025-08-16 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 24,\r\n    \"user_id\": 11,\r\n    \"amount\": 611.58,\r\n    \"timestamp\": \"2025-09-25 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 25,\r\n    \"user_id\": 14,\r\n    \"amount\": 430.56,\r\n    \"timestamp\": \"2025-08-03 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 26,\r\n    \"user_id\": 26,\r\n    \"amount\": 252.95,\r\n    \"timestamp\": \"2025-06-09 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 27,\r\n    \"user_id\": 15,\r\n    \"amount\": 426.67,\r\n    \"timestamp\": \"2025-04-27 01:25:56\",\r\n    \"description\""]
[27.891452, "o", ": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 28,\r\n    \"user_id\": 20,\r\n    \"amount\": 934.18,\r\n    \"timestamp\": \"2025-07-15 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 29,\r\n    \"user_id\": 1,\r\n    \"amount\": 672.93,\r\n    \"timestamp\": \"2025-08-19 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 30,\r\n    \"user_id\": 26,\r\n    \"amount\": 963.54,\r\n    \"timestamp\": \"2025-06-08 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 31,\r\n    \"user_id\": 2,\r\n    \"amount\": 142.48,\r\n    \"timestamp\": \"2025-06-29 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 32,\r\n    \"user_id\": 3,\r\n    \"amount\": 967.95,\r\n    \"timestamp\": \"2025-08-03 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 33,\r\n    \"user_id\": 14,\r\n    \"amount\": 636.2,\r\n    \"timestamp\": \"2025-07-12 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 34,\r\n    \"user_id\": 11,\r\n    \"amount\": 207.14,\r\n    \"timestamp\": \"2025-05-14 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 35,\r\n    \"user_id\": 24,\r\n    \"amount\": 842.26,\r\n    \"timestamp\": \"2025-05-06 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 36,\r\n    \"user_id\": 19,\r\n    \"amount\": 146.05,\r\n    \"timestamp\": \"2025-05-22 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 37,\r\n    \"user_id\": 29,\r\n    \"amount\": 937.42,\r\n    \"timestamp\": \"2025-08-23 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 38,\r\n    \"user_id\": 10,\r\n    \"amount\": 433.44,\r\n    \"timestamp\": \"2025-07-17 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 39,\r\n    \"user_id\": 22,\r\n    \"amount\": 698.58,\r\n    \"timestamp\": \"2025-07-05 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 40,\r\n    \"user_id\": 24,\r\n    \"amount\": 571.19,\r\n    \"timestamp\": \"2025-09-02 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 41,\r\n    \"user_id\": 18,\r\n    \"amount\": 161.8,\r\n    \"timestamp\": \"2025-08-08 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 42,\r\n    \"user_id\": 14,\r\n    \"amount\": 92.43,\r\n    \"timestamp\": \"2025-08-01 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 43,\r\n    \"user_id\": 13,\r\n    \"amount\": 402.84,\r\n    \"timestamp\": \"2025-09-22 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 44,\r\n    \"user_id\": 14,\r\n    \"amount\": 773.87,\r\n    \"timestamp\": \"2025-09-28 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 45,\r\n    \"user_id\": 16,\r\n    \"amount\": 768.53,\r\n    \"timestamp\": \"2025-04-09 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 46,\r\n    \"user_id\": 22,\r\n    \"amount\": 511.78,\r\n    \"timestamp\": \"2025-09-16 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 47,\r\n    \"user_id\": 27,\r\n    \"amount\": 265.3,\r\n    \"timestamp\": \"2025-09-22 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 48,\r\n    \"user_id\": 29,\r\n    \"amount\": 164.35,\r\n    \"timestamp\": \"2025-04-23 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 49,\r\n    \"user_id\": 6,\r\n    \"amount\": 231.22,\r\n    \"timestamp\": \"2025-06-05 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 50,\r\n    \"user_id\": 7,\r\n    \"amount\": 429.88,\r\n    \"timestamp\": \"2025-09-16 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 51,\r\n    \"user_id\": 21,\r\n    \"amount\": 345.49,\r\n    \"timestamp\": \"2025-09-11 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 52,\r\n    \"user_id\": 24,\r\n    \"amount\": 892.01,\r\n    \"timestamp\": \"2025-06-17 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 53,\r\n    \"user_id\": 30,\r\n    \"amount\": 196.84,\r\n    \"timestamp\": \"2025-06-30 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 54,\r\n    \"user_id\": 20,\r\n    \"amount\": 77.84,\r\n    \"timestamp\": \"2025-08-15"]
[27.891473, "o", " 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 55,\r\n    \"user_id\": 30,\r\n    \"amount\": 774.32,\r\n    \"timestamp\": \"2025-07-15 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 56,\r\n    \"user_id\": 26,\r\n    \"amount\": 514.54,\r\n    \"timestamp\": \"2025-05-29 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 57,\r\n    \"user_id\": 5,\r\n    \"amount\": 478.52,\r\n    \"timestamp\": \"2025-04-15 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 58,\r\n    \"user_id\": 17,\r\n    \"amount\": 412.44,\r\n    \"timestamp\": \"2025-06-26 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 59,\r\n    \"user_id\": 26,\r\n    \"amount\": 340.49,\r\n    \"timestamp\": \"2025-09-05 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 60,\r\n    \"user_id\": 20,\r\n    \"amount\": 253.61,\r\n    \"timestamp\": \"2025-07-15 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 61,\r\n    \"user_id\": 2,\r\n    \"amount\": 780.9,\r\n    \"timestamp\": \"2025-06-06 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 62,\r\n    \"user_id\": 28,\r\n    \"amount\": 944.77,\r\n    \"timestamp\": \"2025-04-10 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 63,\r\n    \"user_id\": 6,\r\n    \"amount\": 240.91,\r\n    \"timestamp\": \"2025-04-20 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 64,\r\n    \"user_id\": 29,\r\n    \"amount\": 308.69,\r\n    \"timestamp\": \"2025-04-28 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 65,\r\n    \"user_id\": 26,\r\n    \"amount\": 18.72,\r\n    \"timestamp\": \"2025-06-30 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 66,\r\n    \"user_id\": 1,\r\n    \"amount\": 949.95,\r\n    \"timestamp\": \"2025-09-10 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 67,\r\n    \"user_id\": 3,\r\n    \"amount\": 797.62,\r\n    \"timestamp\": \"2025-09-14 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 68,\r\n    \"user_id\": 26,\r\n    \"amount\": 667.64,\r\n    \"timestamp\": \"2025-07-03 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 69,\r\n    \"user_id\": 3,\r\n    \"amount\": 205.15,\r\n    \"timestamp\": \"2025-07-31 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 70,\r\n    \"user_id\": 18,\r\n    \"amount\": 115.81,\r\n    \"timestamp\": \"2025-05-14 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 71,\r\n    \"user_id\": 25,\r\n    \"amount\": 296.04,\r\n    \"timestamp\": \"2025-06-02 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 72,\r\n    \"user_id\": 9,\r\n    \"amount\": 610.6,\r\n    \"timestamp\": \"2025-06-19 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 73,\r\n    \"user_id\": 18,\r\n    \"amount\": 239.31,\r\n    \"timestamp\": \"2025-09-05 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 74,\r\n    \"user_id\": 24,\r\n    \"amount\": 685.05,\r\n    \"timestamp\": \"2025-07-03 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 75,\r\n    \"user_id\": 8,\r\n    \"amount\": 425.5,\r\n    \"timestamp\": \"2025-07-02 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 76,\r\n    \"user_id\": 28,\r\n    \"amount\": 832.01,\r\n    \"timestamp\": \"2025-04-11 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 77,\r\n    \"user_id\": 17,\r\n    \"amount\": 566.98,\r\n    \"timestamp\": \"2025-09-29 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 78,\r\n    \"user_id\": 20,\r\n    \"amount\": 184.88,\r\n    \"timestamp\": \"2025-09-12 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 79,\r\n    \"user_id\": 22,\r\n    \"amount\": 696.11,\r\n    \"timestamp\": \"2025-08-24 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 80,\r\n    \"user_id\": 25,\r\n    \"amount\": 743.48,\r\n    \"timestamp\": \"2025-06-17 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 81,\r\n    \"user_id\": 30,\r\n    \"amount\": 846.9,\r\n    \""]
[27.891525, "o", "timestamp\": \"2025-06-23 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 82,\r\n    \"user_id\": 30,\r\n    \"amount\": 704.56,\r\n    \"timestamp\": \"2025-04-30 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 83,\r\n    \"user_id\": 14,\r\n    \"amount\": 383.59,\r\n    \"timestamp\": \"2025-05-30 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 84,\r\n    \"user_id\": 7,\r\n    \"amount\": 871.13,\r\n    \"timestamp\": \"2025-04-15 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 85,\r\n    \"user_id\": 20,\r\n    \"amount\": 991.49,\r\n    \"timestamp\": \"2025-05-19 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 86,\r\n    \"user_id\": 30,\r\n    \"amount\": 460.58,\r\n    \"timestamp\": \"2025-06-30 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 87,\r\n    \"user_id\": 23,\r\n    \"amount\": 997.75,\r\n    \"timestamp\": \"2025-06-30 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 88,\r\n    \"user_id\": 27,\r\n    \"amount\": 791.22,\r\n    \"timestamp\": \"2025-07-04 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 89,\r\n    \"user_id\": 26,\r\n    \"amount\": 437.89,\r\n    \"timestamp\": \"2025-07-29 01:25:56\",\r\n    \"description\": \"Refund\"\r\n  },\r\n  {\r\n    \"transaction_id\": 90,\r\n    \"user_id\": 26,\r\n    \"amount\": 399.33,\r\n    \"timestamp\": \"2025-06-29 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 91,\r\n    \"user_id\": 15,\r\n    \"amount\": 946.07,\r\n    \"timestamp\": \"2025-06-26 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 92,\r\n    \"user_id\": 30,\r\n    \"amount\": 242.29,\r\n    \"timestamp\": \"2025-08-11 01:25:56\",\r\n    \"description\": \"Deposit\"\r\n  },\r\n  {\r\n    \"transaction_id\": 93,\r\n    \"user_id\": 8,\r\n    \"amount\": 304.08,\r\n    \"timestamp\": \"2025-05-03 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 94,\r\n    \"user_id\": 29,\r\n    \"amount\": 823.02,\r\n    \"timestamp\": \"2025-07-30 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 95,\r\n    \"user_id\": 21,\r\n    \"amount\": 658.52,\r\n    \"timestamp\": \"2025-04-07 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 96,\r\n    \"user_id\": 14,\r\n    \"amount\": 392.55,\r\n    \"timestamp\": \"2025-07-09 01:25:56\",\r\n    \"description\": \"Withdrawal\"\r\n  },\r\n  {\r\n    \"transaction_id\": 97,\r\n    \"user_id\": 20,\r\n    \"amount\": 195.0,\r\n    \"timestamp\": \"2025-08-26 01:25:56\",\r\n    \"description\": \"Transfer\"\r\n  },\r\n  {\r\n    \"transaction_id\": 98,\r\n    \"user_id\": 13,\r\n    \"amount\": 544.03,\r\n    \"timestamp\": \"2025-08-12 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 99,\r\n    \"user_id\": 26,\r\n    \"amount\": 591.71,\r\n    \"timestamp\": \"2025-08-12 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 100,\r\n    \"user_id\": 2,\r\n    \"amount\": 372.72,\r\n    \"timestamp\": \"2025-07-05 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": null,\r\n    \"user_id\": 5,\r\n    \"amount\": 100.0,\r\n    \"timestamp\": \"2024-01-01 10:00:00\",\r\n    \"description\": \"Invalid\"\r\n  },\r\n  {\r\n    \"transaction_id\": 101,\r\n    \"user_id\": 10,\r\n    \"amount\": -50.0,\r\n    \"timestamp\": \"2024-01-01 10:00:00\",\r\n    \"description\": \"Invalid\"\r\n  },\r\n  {\r\n    \"transaction_id\": 102,\r\n    \"user_id\": 15,\r\n    \"amount\": 200.0,\r\n    \"timestamp\": null,\r\n    \"description\": \"Invalid\"\r\n  },\r\n  {\r\n    \"transaction_id\": 103,\r\n    \"user_id\": 999,\r\n    \"amount\": 150.0,\r\n    \"timestamp\": \"2024-01-01 10:00:00\",\r\n    \"description\": \"Invalid\"\r\n  },\r\n  {\r\n    \"transaction_id\": 104,\r\n    \"user_id\": 8,\r\n    \"amount\": 0,\r\n    \"timestamp\": \"2024-01-01 10:00:00\",\r\n    \"description\": \"Invalid\"\r\n  },\r\n  {\r\n    \"transaction_id\": 105,\r\n    \"user_id\": 12,\r\n    \"amount\": \"invalid\",\r\n    \"timestamp\": \"2024-01-01 10:00:00\",\r\n    \"description\": \"Invalid\"\r\n  }\r\n]"]
[27.893687, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[35.834959, "i", "cat /backup/database.sql; tmux wait -S done\r"]
[35.835253, "o", "cat /backup/database.sql; tmux wait -S done"]
[35.835381, "o", "\r\n\u001b[?2004l\r"]
[35.835886, "o", "-- PostgreSQL database dump\r\n-- This dump contains the schema and some sample data\r\n-- Note: Some statements may have errors that need to be fixed\r\n\r\n-- Create users table\r\nCREATE TABLE IF NOT EXISTS users (\r\n    user_id INTEGER PRIMARY KEY,\r\n    username VARCHAR(100) NOT NULL,\r\n    email VARCHAR(255) NOT NULL,\r\n    created_at TIMESTAMP,\r\n    status VARCHAR(20)\r\n);\r\n\r\n-- Create transactions table  \r\nCREATE TABLE IF NOT EXISTS transactions (\r\n    transaction_id INTEGER PRIMARY KEY,\r\n    user_id INTEGER,\r\n    amount DECIMAL(10,2),\r\n    timestamp TIMESTAMP,\r\n    description TEXT,\r\n    FOREIGN KEY (user_id) REFERENCES users(user_id)\r\n);\r\n\r\n-- Note: The data will be imported from CSV and JSON files\r\n-- This dump only contains the schema\r\n"]
[35.838053, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[41.12683, "i", "psql -U postgres -c \"CREATE DATABASE production_db;\"; tmux wait -S done\r"]
[41.127239, "o", "psql -U postgres -c \"CREATE DATABASE production_db;\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[41.145263, "o", "psql: error: connection to server on socket \"/var/run/postgresql/.s.PGSQL.5432\" failed: FATAL:  Peer authentication failed for user \"postgres\"\r\n"]
[41.147807, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[41.187973, "i", "psql -U postgres -d production_db -f /backup/database.sql; tmux wait -S done\r"]
[41.18839, "o", "psql -U postgres -d production_db -f /backup/database.sql; tmux wait -S done\r\n\u001b[?2004l\r"]
[41.205852, "o", "psql: error: connection to server on socket \"/var/run/postgresql/.s.PGSQL.5432\" failed: FATAL:  Peer authentication failed for user \"postgres\"\r\n"]
[41.207321, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[41.256632, "i", "psql -U postgres -d production_db -c \"\\dt\"; tmux wait -S done\r"]
[41.256897, "o", "psql -U postgres -d production_db -c \"\\dt\"; tmux wait -S done\r\n"]
[41.256915, "o", "\u001b[?2004l\r"]
[41.272804, "o", "psql: error: connection to server on socket \"/var/run/postgresql/.s.PGSQL.5432\" failed: FATAL:  Peer authentication failed for user \"postgres\"\r\n"]
[41.274083, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[46.913223, "i", "su - postgres -c \"psql -c 'CREATE DATABASE production_db;'\"; tmux wait -S done\r"]
[46.913773, "o", "su - postgres -c \"psql -c 'CREATE DATABASE production_db;'\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[47.092107, "o", "CREATE DATABASE\r\n"]
[47.09391, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[47.133249, "i", "su - postgres -c \"psql -d production_db -f /backup/database.sql\"; tmux wait -S done\r"]
[47.133541, "o", "su - postgres -c \"psql -d production_db -f /backup/database.sql\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[47.151831, "o", "CREATE TABLE\r\n"]
[47.153827, "o", "CREATE TABLE\r\n"]
[47.155435, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[47.194148, "i", "su - postgres -c \"psql -d production_db -c '\\dt'\"; tmux wait -S done\r"]
[47.194352, "o", "su - postgres -c \"psql -d production_db -c '\\dt'\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[47.211645, "o", "            List of relations\r\n Schema |     Name     | Type  |  Owner   \r\n--------+--------------+-------+----------\r\n public | transactions | table | postgres\r\n public | users        | table | postgres\r\n(2 rows)\r\n\r\n"]
[47.213388, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[59.731987, "i", "cat > /backup/clean_users.py << 'EOF'\nimport csv\nimport re\n\n# Valid status values\nvalid_statuses = {'active', 'inactive', 'suspended'}\n\n# Email regex pattern\nemail_pattern = re.compile(r'^[^@]+@[^@]+$')\n\nwith open('/backup/users_export.csv', 'r') as infile, open('/backup/clean_users.csv', 'w', newline='') as outfile:\n    reader = csv.DictReader(infile)\n    writer = csv.DictWriter(outfile, fieldnames=['user_id', 'username', 'email', 'created_at', 'status'])\n    writer.writeheader()\n    \n    for row in reader:\n        # Check if user_id is missing or empty\n        if not row.get('user_id') or row['user_id'].strip() == '':\n            continue\n        \n        # Check if username is empty\n        if not row.get('username') or row['username'].strip() == '':\n            continue\n        \n        # Check if email is valid (must contain @)\n        if not row.get('email') or not email_pattern.match(row['email']):\n            continue\n        \n        # Check if status is valid\n        if not row.get('status') or row['status'] not in valid_statuses:\n            continue\n        \n        # Write valid row\n        writer.writerow(row)\nEOF\n"]
[59.732548, "o", "cat > /backup/clean_users.py << 'EOF'\r\n\u001b[?2004l\r\u001b[?2004h> "]
[59.732745, "o", "import csv\r\n\u001b[?2004l\r\u001b[?2004h> import re\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[59.732868, "o", "> # Valid status values\r\n\u001b[?2004l\r\u001b[?2004h> valid_statuses = {'active', 'inactive', 'suspended'}\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> # Email regex pattern\r\n\u001b[?2004l\r\u001b[?2004h> email_pattern = re.compile(r'^[^@]+@[^@]+$')\r\n\u001b[?2004l\r"]
[59.73318, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> with open('/backup/users_export.csv', 'r') as infile, open('/backup/clean_users.csv', 'w', newline='') as outfile:\r\n\u001b[?2004l\r\u001b[?2004h>     reader = csv.DictReader(infile)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[59.734125, "o", "    writer = csv.DictWriter(outfile, fieldnames=['user_id', 'username', 'email', 'created_at', 'status'])\r\n\u001b[?2004l\r\u001b[?2004h>     writer.writeheader()\r\n\u001b[?2004l\r\u001b[?2004h>     \r\n\u001b[?2004l\r\u001b[?2004h>     for row in reader:\r\n\u001b[?2004l\r\u001b[?2004h>         # Check if user_id is missing or empty\r\n\u001b[?2004l\r\u001b[?2004h>         if not row.get('user_id') or row['user_id'].strip() == '':\r\n\u001b[?2004l\r\u001b[?2004h>             continue\r\n\u001b[?2004l\r\u001b[?2004h>         \r\n\u001b[?2004l\r\u001b[?2004h>         # Check if username is empty\r\n\u001b[?2004l\r\u001b[?2004h>         if not row.get('username') or row['username'].strip() == '':\r\n\u001b[?2004l\r\u001b[?2004h>             continue\r\n\u001b[?2004l\r\u001b[?2004h>         \r\n\u001b[?2004l\r\u001b[?2004h>         # Check if email is valid (must contain @)\r\n\u001b[?2004l\r\u001b[?2004h>         if not row.get('email') or not email_pattern.match(row['email']):\r\n\u001b[?2004l\r\u001b[?2004h>             continue\r\n\u001b[?2004l\r\u001b[?2004h>         \r\n\u001b[?2004l\r\u001b[?2004h>         # Check if status is valid\r\n\u001b[?2004l\r\u001b[?2004h>         if not row.get('status') or row['status'] not in valid_statuses:\r\n\u001b[?2004l\r\u001b[?2004h>             continue\r\n\u001b[?2004l\r\u001b[?2004h>         \r\n\u001b[?2004l\r\u001b[?2004h> "]
[59.734288, "o", "        # Write valid row\r\n\u001b[?2004l\r\u001b[?2004h>         writer.writerow(row)\r\n\u001b[?2004l\r\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[59.736036, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[59.774932, "i", "python3 /backup/clean_users.py; tmux wait -S done\r"]
[59.775224, "o", "python3 /backup/clean_users.py; tmux wait -S done\r\n\u001b[?2004l\r"]
[59.789329, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[59.814303, "i", "wc -l /backup/clean_users.csv; tmux wait -S done\r"]
[59.814563, "o", "wc -l /backup/clean_users.csv; tmux wait -S done\r\n\u001b[?2004l\r"]
[59.814823, "o", "31 /backup/clean_users.csv\r\n"]
[59.816083, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[59.848301, "i", "head -5 /backup/clean_users.csv; tmux wait -S done\r"]
[59.848464, "o", "head -5 /backup/clean_users.csv; tmux wait -S done\r\n\u001b[?2004l\r"]
[59.849005, "o", "user_id,username,email,created_at,status\r\r\n1,alice_smith,alice_smith@example.com,2024-11-21 01:25:46,inactive\r\r\n2,bob_jones,bob_jones@example.com,2025-06-28 01:25:46,active\r\r\n3,charlie_brown,charlie_brown@example.com,2025-08-13 01:25:46,suspended\r\r\n4,diana_prince,diana_prince@example.com,2025-08-05 01:25:46,inactive\r\r\n"]
[59.851245, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[71.016253, "i", "su - postgres -c \"psql -d production_db -c \\\"COPY users FROM '/backup/clean_users.csv' WITH (FORMAT csv, HEADER true);\\\"\"; tmux wait -S done\r"]
[71.016669, "o", "su - postgres -c \"psql -d production_db -c \\\"COPY users FROM '/backup/clean_users.csv' WITH (FORMAT csv, HEADER true);\\\"\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[71.039396, "o", "COPY 30\r\n"]
[71.041289, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[71.097046, "i", "su - postgres -c \"psql -d production_db -c 'SELECT COUNT(*) FROM users;'\"; tmux wait -S done\r"]
[71.097491, "o", "su - postgres -c \"psql -d production_db -c 'SELECT COUNT(*) FROM users;'\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[71.119184, "o", " count \r\n-------\r\n    30\r\n(1 row)\r\n\r\n"]
[71.120973, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[71.154887, "i", "cat > /backup/clean_transactions.py << 'EOF'\nimport json\n\n# Read the transactions file\nwith open('/backup/transactions_backup.json', 'r') as f:\n    transactions = json.load(f)\n\nvalid_transactions = []\n\nfor trans in transactions:\n    # Check if transaction_id is null or missing\n    if trans.get('transaction_id') is None:\n        continue\n    \n    # Check if user_id is valid (1-30)\n    user_id = trans.get('user_id')\n    if user_id is None or user_id < 1 or user_id > 30:\n        continue\n    \n    # Check if amount is valid (positive number)\n    amount = trans.get('amount')\n    if amount is None:\n        continue\n    \n    # Check if amount is a valid number and positive\n    try:\n        amount_float = float(amount)\n        if amount_float <= 0:\n            continue\n    except (ValueError, TypeError):\n        continue\n    \n    # Check if timestamp is not null\n    if trans.get('timestamp') is None:\n        continue\n    \n    # Add to valid transactions\n    valid_transactions.append(trans)\n\n# Write to output file\nwith open('/backup/valid_transactions.json', 'w') as f:\n    json.dump(valid_transactions, f, indent=2)\n    f.write('\\n')\nEOF\n"]
[71.155101, "o", "cat > /backup/clean_transactions.py << 'EOF'\r\n\u001b[?2004l\r\u001b[?2004h> import json\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.155148, "o", "# Read the transactions file\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.155236, "o", "with open('/backup/transactions_backup.json', 'r') as f:\r\n\u001b[?2004l\r\u001b[?2004h>     transactions = json.load(f)\r\n\u001b[?2004l\r"]
[71.155349, "o", "\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> valid_transactions = []\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.155363, "o", "for trans in transactions:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.155449, "o", "    # Check if transaction_id is null or missing\r\n\u001b[?2004l\r\u001b[?2004h>     if trans.get('transaction_id') is None:\r\n\u001b[?2004l\r"]
[71.155469, "o", "\u001b[?2004h> "]
[71.155597, "o", "        continue\r\n\u001b[?2004l\r"]
[71.155616, "o", "\u001b[?2004h"]
[71.156382, "o", ">     \r\n\u001b[?2004l\r\u001b[?2004h>     # Check if user_id is valid (1-30)\r\n\u001b[?2004l\r\u001b[?2004h>     user_id = trans.get('user_id')\r\n\u001b[?2004l\r\u001b[?2004h>     if user_id is None or user_id < 1 or user_id > 30:\r\n\u001b[?2004l\r\u001b[?2004h>         continue\r\n\u001b[?2004l\r\u001b[?2004h>     \r\n\u001b[?2004l\r\u001b[?2004h>     # Check if amount is valid (positive number)\r\n\u001b[?2004l\r\u001b[?2004h>     amount = trans.get('amount')\r\n\u001b[?2004l\r\u001b[?2004h>     if amount is None:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.156407, "o", "        continue\r\n\u001b[?2004l\r\u001b[?2004h>     \r\n\u001b[?2004l\r\u001b[?2004h>     # Check if amount is a valid number and positive\r\n\u001b[?2004l\r\u001b[?2004h>     try:\r\n\u001b[?2004l\r\u001b[?2004h>         amount_float = float(amount)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.156567, "o", "        if amount_float <= 0:\r\n\u001b[?2004l\r\u001b[?2004h>             continue\r\n\u001b[?2004l\r\u001b[?2004h>     except (ValueError, TypeError):\r\n\u001b[?2004l\r\u001b[?2004h>         continue\r\n\u001b[?2004l\r\u001b[?2004h"]
[71.156591, "o", ">     \r\n\u001b[?2004l\r\u001b[?2004h>     # Check if timestamp is not null\r\n\u001b[?2004l\r"]
[71.156686, "o", "\u001b[?2004h> "]
[71.156716, "o", "    if trans.get('timestamp') is None:\r\n\u001b[?2004l\r\u001b[?2004h>         continue\r\n\u001b[?2004l\r\u001b[?2004h>     \r\n\u001b[?2004l\r\u001b[?2004h>     # Add to valid transactions\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.156854, "o", "    valid_transactions.append(trans)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> # Write to output file\r\n\u001b[?2004l\r\u001b[?2004h> with open('/backup/valid_transactions.json', 'w') as f:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.1569, "o", "    json.dump(valid_transactions, f, indent=2)\r\n\u001b[?2004l\r\u001b[?2004h> "]
[71.157002, "o", "    f.write('\\n')\r\n\u001b[?2004l\r\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[71.15753, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[71.171921, "i", "python3 /backup/clean_transactions.py; tmux wait -S done\r"]
[71.17207, "o", "python3 /backup/clean_transactions.py; tmux wait -S done\r\n\u001b[?2004l\r"]
[71.18652, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[79.151017, "i", "head -20 /backup/valid_transactions.json; tmux wait -S done\r"]
[79.151458, "o", "head -20 /backup/valid_transactions.json; tmux wait -S done\r\n\u001b[?2004l\r"]
[79.151927, "o", "[\r\n  {\r\n    \"transaction_id\": 1,\r\n    \"user_id\": 16,\r\n    \"amount\": 46.0,\r\n    \"timestamp\": \"2025-07-16 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 2,\r\n    \"user_id\": 6,\r\n    \"amount\": 646.05,\r\n    \"timestamp\": \"2025-05-02 01:25:56\",\r\n    \"description\": \"Payment\"\r\n  },\r\n  {\r\n    \"transaction_id\": 3,\r\n    \"user_id\": 29,\r\n    \"amount\": 186.76,\r\n    \"timestamp\": \"2025-07-30 01:25:56\",\r\n"]
[79.153797, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[79.211217, "i", "tail -20 /backup/valid_transactions.json; tmux wait -S done\r"]
[79.211505, "o", "tail -20 /backup/valid_transactions.json; tmux wait -S done\r\n\u001b[?2004l\r"]
[79.211861, "o", "    \"user_id\": 13,\r\n    \"amount\": 544.03,\r\n    \"timestamp\": \"2025-08-12 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  },\r\n  {\r\n    \"transaction_id\": 99,\r\n    \"user_id\": 26,\r\n    \"amount\": 591.71,\r\n    \"timestamp\": \"2025-08-12 01:25:56\",\r\n    \"description\": \"Purchase\"\r\n  },\r\n  {\r\n    \"transaction_id\": 100,\r\n    \"user_id\": 2,\r\n    \"amount\": 372.72,\r\n    \"timestamp\": \"2025-07-05 01:25:56\",\r\n    \"description\": \"Subscription\"\r\n  }\r\n]\r\n"]
[79.213496, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[79.265977, "i", "cat > /backup/import_transactions.py << 'EOF'\nimport json\nimport psycopg2\n\n# Connect to database\nconn = psycopg2.connect(\n    dbname='production_db',\n    user='postgres',\n    host='/var/run/postgresql'\n)\ncur = conn.cursor()\n\n# Read valid transactions\nwith open('/backup/valid_transactions.json', 'r') as f:\n    transactions = json.load(f)\n\n# Insert transactions\nfor trans in transactions:\n    cur.execute(\n        \"INSERT INTO transactions (transaction_id, user_id, amount, timestamp, description) VALUES (%s, %s, %s, %s, %s)\",\n        (trans['transaction_id'], trans['user_id'], trans['amount'], trans['timestamp'], trans['description'])\n    )\n\nconn.commit()\ncur.close()\nconn.close()\n\nprint(f\"Imported {len(transactions)} transactions\")\nEOF\n"]
[79.266182, "o", "cat > /backup/import_transactions.py << 'EOF'\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.26628, "o", "import json\r\n\u001b[?2004l\r\u001b[?2004h> import psycopg2\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> # Connect to database\r\n\u001b[?2004l\r"]
[79.266422, "o", "\u001b[?2004h> conn = psycopg2.connect(\r\n\u001b[?2004l\r\u001b[?2004h>     dbname='production_db',\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.266447, "o", "    user='postgres',\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.266611, "o", "    host='/var/run/postgresql'\r\n\u001b[?2004l\r\u001b[?2004h> )\r\n\u001b[?2004l\r\u001b[?2004h> cur = conn.cursor()\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> # Read valid transactions\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.266669, "o", "with open('/backup/valid_transactions.json', 'r') as f:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.266736, "o", "    transactions = json.load(f)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h"]
[79.266957, "o", "> # Insert transactions\r\n\u001b[?2004l\r\u001b[?2004h> for trans in transactions:\r\n\u001b[?2004l\r\u001b[?2004h>     cur.execute(\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.267199, "o", "        \"INSERT INTO transactions (transaction_id, user_id, amount, timestamp, description) VALUES (%s, %s, %s, %s, %s)\",\r\n\u001b[?2004l\r\u001b[?2004h> "]
[79.26747, "o", "        (trans['transaction_id'], trans['user_id'], trans['amount'], trans['timestamp'], trans['description'])\r\n\u001b[?2004l\r\u001b[?2004h>     )\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> conn.commit()\r\n\u001b[?2004l\r\u001b[?2004h> cur.close()\r\n\u001b[?2004l\r\u001b[?2004h> conn.close()\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> print(f\"Imported {len(transactions)} transactions\")\r\n\u001b[?2004l\r\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[79.267977, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[79.311939, "i", "python3 /backup/import_transactions.py; tmux wait -S done\r"]
[79.312215, "o", "python3 /backup/import_transactions.py; tmux wait -S done\r\n\u001b[?2004l\r"]
[79.320479, "o", "Traceback (most recent call last):\r\n  File \"/backup/import_transactions.py\", line 2, in <module>\r\n"]
[79.320507, "o", "    import psycopg2\r\nModuleNotFoundError: No module named 'psycopg2'\r\n"]
[79.323735, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[87.020705, "i", "cat > /backup/json_to_csv.py << 'EOF'\nimport json\nimport csv\n\n# Read valid transactions\nwith open('/backup/valid_transactions.json', 'r') as f:\n    transactions = json.load(f)\n\n# Write to CSV\nwith open('/backup/transactions.csv', 'w', newline='') as f:\n    writer = csv.DictWriter(f, fieldnames=['transaction_id', 'user_id', 'amount', 'timestamp', 'description'])\n    writer.writeheader()\n    for trans in transactions:\n        writer.writerow(trans)\n\nprint(f\"Converted {len(transactions)} transactions to CSV\")\nEOF\n"]
[87.020935, "o", "cat > /backup/json_to_csv.py << 'EOF'\r\n\u001b[?2004l\r"]
[87.020956, "o", "\u001b[?2004h> import json\r\n\u001b[?2004l\r\u001b[?2004h> import csv\r\n\u001b[?2004l\r\u001b[?2004h> \r\n"]
[87.020971, "o", "\u001b[?2004l\r"]
[87.021286, "o", "\u001b[?2004h> # Read valid transactions\r\n\u001b[?2004l\r\u001b[?2004h> "]
[87.021451, "o", "with open('/backup/valid_transactions.json', 'r') as f:\r\n\u001b[?2004l\r\u001b[?2004h>     transactions = json.load(f)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r"]
[87.021477, "o", "\u001b[?2004h> # Write to CSV\r\n\u001b[?2004l\r\u001b[?2004h> "]
[87.021572, "o", "with open('/backup/transactions.csv', 'w', newline='') as f:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[87.021808, "o", "    writer = csv.DictWriter(f, fieldnames=['transaction_id', 'user_id', 'amount', 'timestamp', 'description'])\r\n\u001b[?2004l\r\u001b[?2004h>     writer.writeheader()\r\n\u001b[?2004l\r\u001b[?2004h> "]
[87.021851, "o", "    for trans in transactions:\r\n\u001b[?2004l\r\u001b[?2004h> "]
[87.022071, "o", "        writer.writerow(trans)\r\n\u001b[?2004l\r\u001b[?2004h> \r\n\u001b[?2004l\r\u001b[?2004h> "]
[87.02218, "o", "print(f\"Converted {len(transactions)} transactions to CSV\")\r\n\u001b[?2004l\r\u001b[?2004h> EOF\r\n\u001b[?2004l\r"]
[87.022808, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[87.041445, "i", "python3 /backup/json_to_csv.py; tmux wait -S done\r"]
[87.041663, "o", "python3 /backup/json_to_csv.py; tmux wait -S done\r\n\u001b[?2004l\r"]
[87.051363, "o", "Converted 100 transactions to CSV\r\n"]
[87.054754, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[87.106938, "i", "su - postgres -c \"psql -d production_db -c \\\"COPY transactions FROM '/backup/transactions.csv' WITH (FORMAT csv, HEADER true);\\\"\"; tmux wait -S done\r"]
[87.107264, "o", "su - postgres -c \"psql -d production_db -c \\\"COPY transactions FROM '/backup/transactions.csv' WITH (FORMAT csv, HEADER true);\\\"\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[87.124856, "o", "COPY 100\r\n"]
[87.126321, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
[87.17764, "i", "su - postgres -c \"psql -d production_db -c 'SELECT COUNT(*) FROM transactions;'\"; tmux wait -S done\r"]
[87.177923, "o", "su - postgres -c \"psql -d production_db -c 'SELECT COUNT(*) FROM transactions;'\"; tmux wait -S done\r\n\u001b[?2004l\r"]
[87.193544, "o", " count \r\n-------\r\n   100\r\n(1 row)\r\n\r\n"]
[87.195157, "o", "\u001b[?2004hroot@dc6ca25e21c7:/backup# "]
