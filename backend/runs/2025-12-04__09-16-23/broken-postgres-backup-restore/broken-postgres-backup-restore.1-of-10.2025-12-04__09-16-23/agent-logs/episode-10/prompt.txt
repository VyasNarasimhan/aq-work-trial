root@fa3327fd3fc4:/backup# dos2unix /backup/clean_users.csv 2>/dev/null || sed -i 's/\r$//' /backup/clean_users.csv; tmux wait -S done
root@fa3327fd3fc4:/backup# tail -c 20 /backup/clean_users.csv | od -c; tmux wait -S done
0000000   -   2   2       0   1   :   2   5   :   4   6   ,   a   c   t
0000020   i   v   e  \n
0000024
root@fa3327fd3fc4:/backup# su - postgres -c "psql -d production_db -c '\dt'"; tmux wait -S done
            List of relations
 Schema |     Name     | Type  |  Owner
--------+--------------+-------+----------
 public | transactions | table | postgres
 public | users        | table | postgres
(2 rows)

root@fa3327fd3fc4:/backup# su - postgres -c "psql -d production_db -c 'SELECT * FROM users LIMIT 3;'"; tmux wait -S done
 user_id |   username    |           email           |     created_at      |  status
---------+---------------+---------------------------+---------------------+-----------
       1 | alice_smith   | alice_smith@example.com   | 2024-11-21 01:25:46 | inactive
       2 | bob_jones     | bob_jones@example.com     | 2025-06-28 01:25:46 | active
       3 | charlie_brown | charlie_brown@example.com | 2025-08-13 01:25:46 | suspended
(3 rows)

root@fa3327fd3fc4:/backup# su - postgres -c "psql -d production_db -c 'SELECT * FROM transactions LIMIT 3;'"; tmux wait -S done
 transaction_id | user_id | amount |      timestamp      | description
----------------+---------+--------+---------------------+--------------
              1 |      16 |  46.00 | 2025-07-16 01:25:56 | Subscription
              2 |       6 | 646.05 | 2025-05-02 01:25:56 | Payment
              3 |      29 | 186.76 | 2025-07-30 01:25:56 | Payment
(3 rows)

root@fa3327fd3fc4:/backup# echo '=== Final Verification ===' && ls -1 /backup/*.csv /backup/*.json /backup/*.txt 2>/dev/null | grep -E '(clean_users|valid_trans
actions|db_stats|top_users|backup_verification|recovery_complete)' && echo '=== All required files present ==='; tmux wait -S done
=== Final Verification ===
/backup/backup_verification.txt
/backup/clean_users.csv
/backup/db_stats.txt
/backup/recovery_complete.txt
/backup/top_users.csv
/backup/valid_transactions.json
=== All required files present ===
root@fa3327fd3fc4:/backup#
